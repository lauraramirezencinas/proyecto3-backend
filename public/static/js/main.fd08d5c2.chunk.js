(this["webpackJsonpsugar-place"]=this["webpackJsonpsugar-place"]||[]).push([[0],{144:function(e,a,t){e.exports=t(293)},149:function(e,a,t){},150:function(e,a,t){},293:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),o=t(18),c=t.n(o),l=(t(149),t(4)),s=t(5),i=t(7),m=t(6),u=(t(150),t(11)),d=(t(151),t(300)),p=t(299),h=t(12),f=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(s.a)(t,[{key:"render",value:function(){var e=n.a.createElement(n.a.Fragment,null,n.a.createElement("li",{className:"nav-item"},n.a.createElement(h.b,{to:"/login"},"Login   ")),n.a.createElement("li",{className:"nav-item"},n.a.createElement(h.b,{to:"/signup"},"Sign up")));return this.props.user&&(console.log("Hay usuario logueado!"),e=n.a.createElement(n.a.Fragment,null,n.a.createElement("li",{className:"nav-item"},n.a.createElement(h.b,{to:"/profile",className:"nav-link"},"Perfil")),n.a.createElement("li",{className:"nav-item"},n.a.createElement(h.b,{to:"/pedidos",className:"nav-link"},"Pedidos")),n.a.createElement("li",{className:"nav-item"},n.a.createElement(h.b,{to:"/logout",className:"nav-link"},"Hola ",this.props.user.nombre,",Logout ")))),n.a.createElement(d.a,{expand:"lg"},n.a.createElement("div",{className:"container"},n.a.createElement(d.a.Brand,{className:"nav-logo",href:"/"},"Sugar-Place"),n.a.createElement(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),n.a.createElement(d.a.Collapse,{id:"basic-navbar-nav"},n.a.createElement(p.a,{className:"mr-auto"},e))))}}]),t}(r.Component),g=t(16),b=t(10),E=t.n(b),v=function e(){var a=this;Object(l.a)(this,e),this.signup=function(e,t,r,n,o){return a.service.post("/signup",{nombre:e,apellido:t,email:r,password:n,isBaker:o}).then((function(e){return e.data}))},this.loggedin=function(){return a.service.get("/loggedin").then((function(e){return e.data}))},this.login=function(e,t){return a.service.post("/login",{email:e,password:t}).then((function(e){return e.data}))},this.logout=function(){return a.service.post("/logout",{}).then((function(e){return e.data}))};var t=E.a.create({baseURL:"".concat("https://sugar-place.herokuapp.com","/api/auth"),withCredentials:!0});this.service=t},N=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).handleChange=function(e){var a=e.target,t=a.name,n=a.value;r.setState(Object(g.a)({},t,n))},r.handleFormSubmit=function(e){e.preventDefault(),console.log("hola");var a=r.state,t=a.email,n=a.password;r.service.login(t,n).then((function(e){r.props.getUser(e),r.setState({email:"",password:"",redirect:!0}),console.log(e)})).catch((function(e){console.log(e.response.data.message),r.setState({message:e.response.data.message})}))},r.renderRedirect=function(){if(!0===r.state.redirect)return n.a.createElement(u.a,{to:"/profile"})},r.state={email:"",password:"",redirect:!1,message:""},r.service=new v,r}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a="";return this.state.message&&(a=n.a.createElement("small",{className:"form-text text-muted"},this.state.message)),n.a.createElement("div",{className:"container mt-80"},n.a.createElement("div",{className:"col-12 col-md-8 col-lg-6 offset-md-2 offset-lg-3"},n.a.createElement("form",{onSubmit:this.handleFormSubmit},n.a.createElement("div",{className:"mt-30"},n.a.createElement("h4",{className:"title-form"}," Inicia sesi\xf3n")),n.a.createElement("div",{className:"form-group "},n.a.createElement("input",{type:"email",className:"form-control",name:"email",value:this.state.email,onChange:function(a){return e.handleChange(a)},"aria-describedby":"emailHelp",placeholder:"Introduce tu email"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"password",className:"form-control",id:"exampleInputPassword1",name:"password",value:this.state.password,onChange:function(a){return e.handleChange(a)},placeholder:"Password"})),n.a.createElement("button",{class:"btn boton-form",type:"submit"},"Log in"),a,n.a.createElement("div",{className:"mt-30 mb-50"},n.a.createElement("p",{className:"extra-form"},"\xbfNo tienes una cuenta?"),n.a.createElement(h.b,{xlassName:"extra-form",to:"/signup"}," Registrate")),this.renderRedirect())))}}]),t}(r.Component),C=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).service=new v,r}return Object(s.a)(t,[{key:"render",value:function(){var e=this;return this.service.logout().then((function(a){e.props.getUser(null)})).catch((function(e){return console.log(e)})),n.a.createElement(u.a,{to:"/"})}}]),t}(r.Component),y=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).handleChange=function(e){var a=e.target,t=a.name,n=a.value;r.setState(Object(g.a)({},t,n))},r.handleFormSubmit=function(e){e.preventDefault();var a=r.state,t=a.nombre,n=a.apellido,o=a.email,c=a.password,l=a.isBaker;r.service.signup(t,n,o,c,l).then((function(e){r.props.getUser(e),r.setState({nombre:"",apellido:"",email:"",password:"",isBaker:e.isBaker,redirect:!0})})).catch((function(e){console.log(e.response.data.message),r.setState({message:e.response.data.message})}))},r.renderRedirect=function(){if(!0===r.state.redirect&&!1===r.state.isBaker)return n.a.createElement(u.a,{to:"/"});if(!0===r.state.redirect&&!0===r.state.isBaker){r.props.getUser.id;return n.a.createElement(u.a,{to:"/formbaker"})}},r.state={nombre:"",apellido:"",email:"",password:"",isBaker:!1,redirect:!1},r.service=new v,r}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a="";return this.state.message&&(a=n.a.createElement("small",{className:"form-text text-muted"},this.state.message)),n.a.createElement("div",{className:"container mt-80"},n.a.createElement("div",{className:"col-12 col-md-8 col-lg-6 offset-md-2 offset-lg-3"},n.a.createElement("form",{onSubmit:this.handleFormSubmit},n.a.createElement("div",{className:"mt-30"},n.a.createElement("h4",{className:"title-form"},"Registrate")),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"text",className:"form-control",name:"nombre",value:this.state.nombre,onChange:function(a){return e.handleChange(a)},"aria-describedby":"emailHelp",placeholder:"Introduce tu nombre"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"text",className:"form-control",name:"apellido",value:this.state.apellido,onChange:function(a){return e.handleChange(a)},"aria-describedby":"emailHelp",placeholder:"Introduce tu apellido"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"email",className:"form-control",name:"email",value:this.state.email,onChange:function(a){return e.handleChange(a)},"aria-describedby":"emailHelp",placeholder:"Introduce tu email"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"password",className:"form-control",id:"exampleInputPassword1",name:"password",value:this.state.password,onChange:function(a){return e.handleChange(a)},placeholder:"Password"})),n.a.createElement("div",{className:"form-check"},n.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"exampleCheck1",name:"isBaker",onChange:function(a){return e.handleChange(a)},value:"true"}),n.a.createElement("label",{className:"form-check-label extra-form",for:"exampleCheck1"},"Soy una panaderia"," ")),n.a.createElement("button",{className:"btn boton-form",type:"submit"},"Registrame"),a,n.a.createElement("div",{className:"mt-30 mb-50"},n.a.createElement("p",{className:"extra-form"},"\xbfYa tienes una cuenta?"),n.a.createElement(h.b,{className:"extra-form",to:"/login"}," Login")),this.renderRedirect())))}}]),t}(r.Component),O=(t(143),t(142)),k=t(139),j=t(15),x=t.n(j),w=t(21),S=t(301),I=t(41),U=t(298),P=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).handleChange=function(e){var a=e.target,t=a.name,n=a.value;r.setState(Object(g.a)({},t,n))},r.handleFormSubmit=function(e){e.preventDefault(),r.props.onHide();var a=r.state,t=a.nombre,n=a.descripcion,o=a.precio,c=a.ingredientes;E.a.patch("".concat("https://sugar-place.herokuapp.com","/api/producto/").concat(r.props.producto._id),{nombre:t,descripcion:n,precio:o,ingredientes:c},{withCredentials:!0}).then((function(e){window.location.href="/profile/"}))},r.state={nombre:r.props.producto.nombre,descripcion:r.props.producto.descripcion,precio:r.props.producto.precio,ingredientes:r.props.producto.ingredientes,imagenUrl:r.props.producto.imagenUrl},r}return Object(s.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(U.a,Object.assign({},this.props,{"aria-labelledby":"contained-modal-title-vcenter"}),n.a.createElement(U.a.Header,{closeButton:!0},n.a.createElement(U.a.Title,null,"Editar Producto")),n.a.createElement("div",{className:"container"},n.a.createElement("form",{onSubmit:this.handleFormSubmit},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Nombre"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"nombre",value:this.state.nombre,onChange:function(a){return e.handleChange(a)}})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Descripci\xf3n"),n.a.createElement("textarea",{className:"form-control",id:"exampleFormControlTextarea1",maxLength:"90",rows:"3",name:"descripcion",value:this.state.descripcion,onChange:function(a){return e.handleChange(a)}}),n.a.createElement("small",{className:"form-text text-muted"},"Introduce una descripcion de tu producto (m\xe1ximo 90 caracteres)")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Precio"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"precio",value:this.state.precio,onChange:function(a){return e.handleChange(a)}})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Ingredientes"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"ingredientes",value:this.state.ingredientes,onChange:function(a){return e.handleChange(a)}})),n.a.createElement(U.a.Footer,null,n.a.createElement("button",{className:"btn boton-form",type:"submit"},"Guardar")))))}}]),t}(r.Component),F=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).handleClick=function(){var e="/baker/"+r.props.producto.idUsuario._id;window.location.href=e},r.openModal=function(){r.setState({modalOpen:!0})},r.closeModal=function(){r.setState({modalOpen:!1})},r.increment=Object(w.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.setState({count:r.state.count+1});case 2:r.props.modifyItem(r.props.producto._id,r.state.count,r.props.producto.precio,r.props.producto.nombre,r.props.producto.idUsuario._id);case 3:case"end":return e.stop()}}),e)}))),r.decrement=Object(w.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.setState({count:r.state.count-1});case 2:r.state.count<0&&r.setState({count:0}),r.props.modifyItem(r.props.producto._id,r.state.count,r.props.producto.precio,r.props.producto.nombre,r.props.producto.idUsuario._id);case 4:case"end":return e.stop()}}),e)}))),r.deleteProduct=function(){E.a.delete("".concat("https://sugar-place.herokuapp.com","/api/producto/").concat(r.props.producto._id)).then((function(){window.location.href="/profile/"})).catch((function(e){console.log(e)}))},r.state={modalOpen:!1,count:0},r.handleClick=r.handleClick.bind(),r.openModal=r.openModal.bind(),r.closeModal=r.closeModal.bind(),r.deleteProduct=r.deleteProduct.bind(),r}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a="";return a=this.props.editable?n.a.createElement(n.a.Fragment,null,n.a.createElement(S.a.Body,{className:"productCard"},n.a.createElement(I.CloudinaryContext,{cloudName:"dry1b4yex"},n.a.createElement(I.Image,{className:"img-cloudy",publicId:this.props.producto.imageName,height:"200",width:"350",crop:"fill",alt:"producto"})),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row card-row"},n.a.createElement("div",{className:"col-8 "},n.a.createElement(S.a.Title,{className:"nombre-producto"},this.props.producto.nombre)),n.a.createElement("div",{className:"col-4"},n.a.createElement("p",{className:"precio"},this.props.producto.precio," \u20ac"))),n.a.createElement(S.a.Text,{className:"mb-30"},n.a.createElement("p",{className:"baker-card mh-100"},this.props.producto.descripcion),n.a.createElement("p",{className:"ingredients-card"},this.props.producto.ingredientes)),n.a.createElement(k.a,{className:"boton-editar",variant:"primary",onClick:this.openModal},"Editar"),n.a.createElement(P,{producto:this.props.producto,show:this.state.modalOpen,onHide:function(){return e.closeModal()}}),n.a.createElement(k.a,{className:"boton-borrar",variant:"primary",onClick:this.deleteProduct},"Borrar")))):this.props.isStore?n.a.createElement(n.a.Fragment,null,n.a.createElement(S.a.Body,{className:"productCard card-clik"},n.a.createElement(I.CloudinaryContext,{cloudName:"dry1b4yex"},n.a.createElement(I.Image,{className:"img-cloudy",publicId:this.props.producto.imageName,height:"200",width:"350",crop:"fill",alt:"producto"})),n.a.createElement("div",{className:"container "},n.a.createElement("div",{className:"row card-row"},n.a.createElement("div",{className:"col-8"},n.a.createElement(S.a.Title,{className:"nombre-producto"},this.props.producto.nombre)),n.a.createElement("div",{className:"col-4"},n.a.createElement("p",{className:"precio"},this.props.producto.precio," \u20ac"))),n.a.createElement(S.a.Text,null,n.a.createElement("p",{className:"baker-card mh-100"},this.props.producto.descripcion),n.a.createElement("p",{className:"ingredients-card"},this.props.producto.ingredientes))),n.a.createElement("div",{className:"row counter"},n.a.createElement("button",{className:"inc",onClick:this.decrement},"-"),n.a.createElement("p",{className:"count"},this.state.count),n.a.createElement("button",{className:"inc",onClick:this.increment},"+")))):n.a.createElement(n.a.Fragment,null,n.a.createElement(S.a.Body,{className:"productCard card-clik",onClick:this.handleClick},n.a.createElement(I.CloudinaryContext,{cloudName:"dry1b4yex"},n.a.createElement(I.Image,{className:"img-cloudy",publicId:this.props.producto.imageName,height:"200",width:"350",crop:"fill",alt:"producto"})),n.a.createElement("div",{className:"container "},n.a.createElement("div",{className:"row card-row"},n.a.createElement("div",{className:"col-8 "},n.a.createElement(S.a.Title,{className:"nombre-producto"},this.props.producto.nombre)),n.a.createElement("div",{className:"col-4"},n.a.createElement("p",{className:"precio"},this.props.producto.precio," \u20ac"))),n.a.createElement(S.a.Text,null,n.a.createElement("p",{className:"baker-card mh-100"},this.props.producto.descripcion),n.a.createElement("p",{className:"ingredients-card"},this.props.producto.ingredientes)),n.a.createElement("div",{className:"row mt-30 mb-30"},n.a.createElement("div",{className:"col-3"},n.a.createElement("img",{src:this.props.producto.idUsuario.logoUrl,className:"img-card rounded-circle",alt:"logo"})),n.a.createElement("div",{className:"col-6 col-logo"},n.a.createElement("p",{className:"baker-card baker-name"},this.props.producto.idUsuario.nombreNegocio),n.a.createElement("p",{className:"baker-card"},this.props.producto.idUsuario.horario)),n.a.createElement("div",{className:"col-3"},n.a.createElement("img",{src:"../images/tienda.png",className:"img-tienda",alt:"tienda"})))))),n.a.createElement(S.a,{className:"shadow mb-5"},a)}}]),t}(r.Component),D=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).state={productos:[]},r}return Object(s.a)(t,[{key:"refresh",value:function(){var e=this;this.props.productos&&0!=this.props.productos.length?this.setState({productos:this.props.productos}):this.props.profile?E.a.get("".concat("https://sugar-place.herokuapp.com","/api/producto/profile/"),{withCredentials:!0}).then((function(a){e.setState({productos:a.data})})):this.props.userId?E.a.get("".concat("https://sugar-place.herokuapp.com","/api/producto/all/?user_id=")+this.props.userId).then((function(a){e.setState({productos:a.data})})):E.a.get("".concat("https://sugar-place.herokuapp.com","/api/producto/all/")+"?time="+(new Date).valueOf()).then((function(a){e.setState({productos:a.data})}))}},{key:"componentDidUpdate",value:function(e){e.productos!==this.props.productos&&this.refresh()}},{key:"componentDidMount",value:function(){this.refresh()}},{key:"render",value:function(){var e=this,a=this.state.productos.map((function(a){return n.a.createElement(F,{key:a._id,producto:a,editable:e.props.editable,isStore:null!=e.props.userId,modifyItem:e.props.modifyItem})}));return n.a.createElement("div",{className:"card-columns container grid mt-40"},a)}}]),t}(r.Component),T=t(35),M=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).handleChange=function(e){var a=e.target,t=a.name,n=a.value;r.setState(Object(g.a)({},t,n))},r.handleFormSubmit=function(e){e.preventDefault(),r.props.onHide();var a=r.state,t=a.nombre,n=a.apellido,o=a.email,c=a.nombreNegocio,l=a.descripcion,s=a.calleNumero,i=a.horario,m=a.logoUrl,u=a.facebook,d=a.instagram;E.a.patch("".concat("https://sugar-place.herokuapp.com","/api/usuario/").concat(r.props.user._id),{nombre:t,apellido:n,email:o,nombreNegocio:c,descripcion:l,calleNumero:s,horario:i,logoUrl:m,facebook:u,instagram:d},{withCredentials:!0}).then((function(e){r.props.getUser(e.data.user);window.location.href="/profile/"}))},r.state={nombre:r.props.user.nombre,apellido:r.props.user.apellido,email:r.props.user.email,nombreNegocio:r.props.user.nombreNegocio,descripcion:r.props.user.descripcion,calleNumero:r.props.user.direccion.calleNumero,horario:r.props.user.horario,logoUrl:r.props.user.logoUrl,facebook:r.props.user.facebook,instagram:r.props.user.instagram},r.handleChange=r.handleChange.bind(Object(T.a)(r)),r.handleFormSubmit=r.handleFormSubmit.bind(Object(T.a)(r)),r}return Object(s.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(U.a,Object.assign({},this.props,{"aria-labelledby":"contained-modal-title-vcenter"}),n.a.createElement(U.a.Header,{closeButton:!0},n.a.createElement(U.a.Title,null,"Editar Perfil")),n.a.createElement("div",{className:"container"},n.a.createElement("form",{onSubmit:this.handleFormSubmit},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Nombre"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"nombre",value:this.state.nombre,onChange:function(a){return e.handleChange(a)}}),n.a.createElement("input",{type:"hidden",className:"form-control",placeholder:"",name:"logoUrl",value:this.state.logoUrl,onChange:function(a){return e.handleChange(a)}})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Apellido"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"apellido",value:this.state.apellido,onChange:function(a){return e.handleChange(a)}})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Email"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"email",value:this.state.email,onChange:function(a){return e.handleChange(a)}})),n.a.createElement("h4",{className:"direccion"},"Direcci\xf3n"),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"label-form"},"Calle y Numero"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"calleNumero",value:this.state.calleNumero,onChange:function(a){return e.handleChange(a)}})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Nombre de la Panaderia"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"nombreNegocio",value:this.state.nombreNegocio,onChange:function(a){return e.handleChange(a)}})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Descripci\xf3n"),n.a.createElement("textarea",{className:"form-control",id:"exampleFormControlTextarea1",rows:"3",name:"descripcion",value:this.state.descripcion,onChange:function(a){return e.handleChange(a)}}),n.a.createElement("small",{className:"form-text text-muted"},"Introduce una descripcion de tu producto")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Horario"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"horario",value:this.state.horario,onChange:function(a){return e.handleChange(a)}})),n.a.createElement(U.a.Footer,null,n.a.createElement("button",{className:"btn boton-form",type:"submit"},"Guardar")))))}}]),t}(r.Component),B=t(140),R=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).state={lat:"",lng:"",calleNumero:r.props.bakery.direccion.calleNumero},r}return Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.a.get("".concat("https://sugar-place.herokuapp.com","/api/maps?search=")+this.state.calleNumero+"&time="+(new Date).valueOf()).then((function(a){console.log("mapa",a.data),e.setState({lat:a.data.candidates[0].geometry.location.lat,lng:a.data.candidates[0].geometry.location.lng,direccion:a.data.candidates[0].formatted_address})}))}},{key:"render",value:function(){var e=this,a={lat:this.state.lat,lng:this.state.lng};return n.a.createElement("div",{className:"mapa"},n.a.createElement(B.a,{key:this.state.direccion,bootstrapURLKeys:{key:"AIzaSyBT0RpL1Yw7Q5WC4WemS6hyJ_Y3PnSUyfY"},defaultCenter:a,defaultZoom:15,options:function(e){return{disableDefaultUI:!1,mapTypeControl:!0,streetViewControl:!0,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"on"}]}]}},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(a){return function(a,t){var r={lat:e.state.lat,lng:e.state.lng};new t.Marker({position:r,map:a,title:e.state.direccion})}(a.map,a.maps)}}))}}]),t}(r.Component),H=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).openModal=function(){r.setState({modalOpen:!0})},r.closeModal=function(){r.setState({modalOpen:!1})},r.state={modalOpen:!1},r.openModal=r.openModal.bind(),r.closeModal=r.closeModal.bind(),r}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a="";return this.props.user&&(a=this.props.profile?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"col-xs-12 col-md-4 mt-20"},n.a.createElement("img",{src:this.props.user.logoUrl,className:"img-perfil rounded-circle",alt:"logo"})),n.a.createElement("div",{className:"col-xs-12 col-md-4 mt-20"},n.a.createElement("p",{className:"bak-campos"},"NOMBRE:  ",n.a.createElement("span",{className:"bak-val"},this.props.user.nombre)),n.a.createElement("p",{className:"bak-campos"},"APELLIDO:  ",n.a.createElement("span",{className:"bak-val"},this.props.user.apellido)),n.a.createElement("p",{className:"bak-campos"},"EMAIL: ",n.a.createElement("span",{className:"bak-val"},this.props.user.email)),n.a.createElement("p",{className:"bak-campos"},"DIRECC\xd3N: ",n.a.createElement("span",{className:"bak-val"},this.props.user.direccion.calleNumero," ")),n.a.createElement("p",{className:"bak-campos"},"NOMBRE DE LA PANADERIA:  ",n.a.createElement("span",{className:"bak-val"},this.props.user.nombreNegocio)),n.a.createElement("p",{className:"bak-campos"},"DESCRIPCION:  ",n.a.createElement("span",{className:"bak-val"},this.props.user.descripcion)),n.a.createElement("p",{className:"bak-campos"},"HORARIO:  ",n.a.createElement("span",{className:"bak-val"},this.props.user.horario)),n.a.createElement(k.a,{className:"boton-editar",variant:"primary",onClick:this.openModal},"Editar perfil"),n.a.createElement(M,{user:this.props.user,getUser:this.props.getUser,show:this.state.modalOpen,onHide:function(){return e.closeModal()}}))):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"col-xs-12 col-md-4 mt-20 bakery"},n.a.createElement("img",{src:this.props.user.logoUrl,className:"img-perfil rounded-circle",alt:"logo"})),n.a.createElement("div",{className:"col-xs-12 col-md-8 mt-20"},n.a.createElement("h1",{className:"perfil mb-20 bakery"},this.props.user.nombreNegocio),n.a.createElement("p",{className:"bak-campos"},"DESCRIPCION:  ",n.a.createElement("span",{className:"bak-val"},this.props.user.descripcion)),n.a.createElement("p",{className:"bak-campos"},"DIRECC\xd3N: ",n.a.createElement("span",{className:"bak-val"},this.props.user.direccion.calleNumero," ")),n.a.createElement("p",{className:"bak-campos"},"HORARIO:  ",n.a.createElement("span",{className:"bak-val"},this.props.user.horario)),n.a.createElement(R,{bakery:this.props.user})))),n.a.createElement("div",{className:"row container "},a)}}]),t}(r.Component);var _=function(e){return n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Imagen*"),n.a.createElement("input",{type:"file",className:"",placeholder:"",name:e.fieldName,onChange:function(a){e.handleImageChange(a.target.files[0])}}))},L=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).handleChange=function(e){var a=e.target,t=a.name,n=a.value;r.setState(Object(g.a)({},t,n))},r.handleImageChange=function(e){r.setState({imagenUrl:e})},r.handleFormSubmit=function(e){e.preventDefault();var a=new FormData;a.append("nombre",r.state.nombre),a.append("descripcion",r.state.descripcion),a.append("precio",r.state.precio),a.append("ingredientes",r.state.ingredientes),a.append("imagenUrl",r.state.imagenUrl);r.props.user._id;E.a.post("".concat("https://sugar-place.herokuapp.com","/api/producto/"),a,{headers:{"content-type":"multipart/form-data"},withCredentials:!0}).then(function(){var e=Object(w.a)(x.a.mark((function e(a){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a.data),e.next=3,r.setState({nombre:"",descripcion:"",precio:"",ingredientes:"",imagenUrl:"",message:""});case 3:r.props.onHide(),"/profile/",window.location.href="/profile/";case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){console.log(e.response.data.message),r.setState({message:e.response.data.message})}))},r.state={nombre:"",descripcion:"",precio:"",ingredientes:"",imagenUrl:"",message:""},r}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a="";return this.state.message&&(a=n.a.createElement("small",{className:"form-text errores"},this.state.message)),n.a.createElement(U.a,Object.assign({},this.props,{"aria-labelledby":"contained-modal-title-vcenter"}),n.a.createElement(U.a.Header,{closeButton:!0},n.a.createElement(U.a.Title,null,"Producto")),n.a.createElement("div",{className:"container"},n.a.createElement("form",{onSubmit:this.handleFormSubmit},n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"hidden",className:"form-control",name:"idUsuario",onChange:function(a){return e.handleChange(a)}}),n.a.createElement("label",null,"Nombre*"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"nombre",value:this.state.nombre,onChange:function(a){return e.handleChange(a)}})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Descripci\xf3n*"),n.a.createElement("textarea",{className:"form-control",maxlength:"90",id:"exampleFormControlTextarea1",rows:"3",name:"descripcion",value:this.state.descripcion,onChange:function(a){return e.handleChange(a)}}),n.a.createElement("small",{className:"form-text text-muted"},"Introduce una descripcion de tu producto(m\xe1ximo 90 caracteres)")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Precio*"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"precio",value:this.state.precio,onChange:function(a){return e.handleChange(a)}})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Ingredientes*"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"ingredientes",value:this.state.ingredientes,onChange:function(a){return e.handleChange(a)}}),n.a.createElement("small",{className:"form-text text-muted"},"Introducir los ingredientes principales")),n.a.createElement(_,{handleImageChange:this.handleImageChange,fieldName:"imageUrl"}),n.a.createElement("small",{className:"form-text text-muted"},"*Campos obligatorios"),n.a.createElement(U.a.Footer,null,n.a.createElement("button",{className:"btn boton-form",type:"submit"},"Guardar"))),a))}}]),t}(r.Component);var q=function(e){var a=Object(r.useState)(!1),t=Object(O.a)(a,2),o=t[0],c=t[1],l=JSON.parse(localStorage.getItem("user"));return console.log("loggedInUser",l),n.a.createElement("div",{className:"container mt-30"},n.a.createElement("h1",{className:"perfil"}," Mi Perfil"),n.a.createElement(H,{user:l,getUser:e.getUser,profile:!0}),n.a.createElement("div",{className:"col-12"},n.a.createElement(k.a,{className:"boton",variant:"primary",onClick:function(){return c(!0)}},"A\xf1adir producto")),n.a.createElement(L,{show:o,onHide:function(){return c(!1)},user:l}),n.a.createElement(D,{editable:!0,profile:l}))},A=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).handleChange=function(e){var a=e.target,t=a.name,n=a.value;r.setState(Object(g.a)({},t,n))},r.handleImageChange=function(e){r.setState({logoUrl:e})},r.handleFormSubmit=function(e){var a=JSON.parse(localStorage.getItem("user"));console.log(a._id),e.preventDefault();var t=new FormData;t.append("nombreNegocio",r.state.nombreNegocio),t.append("descripcion",r.state.descripcion),t.append("calleNumero",r.state.calleNumero),t.append("ciudad",r.state.ciudad),t.append("horario",r.state.horario),t.append("logoUrl",r.state.logoUrl),E.a.patch("".concat("https://sugar-place.herokuapp.com","/api/usuario/").concat(a._id),t,{headers:{"content-type":"multipart/form-data"},withCredentials:!0}).then((function(e){r.props.getUser(e.data.user),r.setState({redirect:!0})})).catch((function(e){console.log(e.response.data.message),r.setState({message:e.response.data.message})}))},r.renderRedirect=function(){if(r.state.redirect)return n.a.createElement(u.a,{to:"/profile"})},r.state={nombreNegocio:"",descripcion:"",calleNumero:"",ciudad:"",horario:"",logoUrl:"",facebook:"",instagram:"",redirect:!1,message:""},r.handleChange=r.handleChange.bind(Object(T.a)(r)),r.handleFormSubmit=r.handleFormSubmit.bind(Object(T.a)(r)),r}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a="";return this.state.message&&(a=n.a.createElement("small",{className:"form-text text-muted"},this.state.message)),n.a.createElement("div",{className:"container mt-50 mb-100"},n.a.createElement("div",{className:"col-12 col-md-8 col-lg-6 offset-md-2 offset-lg-3"},n.a.createElement("h1",{className:"title-form"},"Panderia"),n.a.createElement("form",{onSubmit:this.handleFormSubmit},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"label-form"},"Nombre del Negocio*"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"nombreNegocio",value:this.state.nombreNegocio,onChange:function(a){return e.handleChange(a)}})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"label-form"},"Descripci\xf3n*"),n.a.createElement("textarea",{className:"form-control",id:"exampleFormControlTextarea1",rows:"3",name:"descripcion",value:this.state.descripcion,onChange:function(a){return e.handleChange(a)}}),n.a.createElement("small",{className:"form-text text-muted"},"Introduce una descripcion de tu panaderia")),n.a.createElement("h4",{className:"direccion"},"Direcci\xf3n*"),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"label-form"},"Direcci\xf3n*"),n.a.createElement("small",{className:"form-text text-muted"},"Introduce Calle, Numero y Ciudad"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"calleNumero",value:this.state.calleNumero,onChange:function(a){return e.handleChange(a)}})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"label-form"},"Horario"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"horario",value:this.state.horario,onChange:function(a){return e.handleChange(a)}})),n.a.createElement(_,{handleImageChange:this.handleImageChange,fieldName:"logoUrl"}),n.a.createElement("button",{class:"btn boton-form",type:"submit",userUpdate:this.updateProfile},"Guardar"),a,this.renderRedirect())))}}]),t}(r.Component),z={width:"100%",height:"290px",backgroundImage:"url(/images/busqueda.png)"},G=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).handleChange=function(){var e=Object(w.a)(x.a.mark((function e(a){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.setState({search:a.target.value});case 2:r.updateIt();case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),r.state={search:""},r}return Object(s.a)(t,[{key:"updateIt",value:function(){var e=this;E.a.get("".concat("https://sugar-place.herokuapp.com","/api/producto/all/?search=")+this.state.search+"&time="+(new Date).valueOf()).then((function(a){console.log(a.data.length),e.props.changeProducts(a.data)}))}},{key:"render",value:function(){return n.a.createElement("div",{className:"fondoBusqueda  ",style:z},n.a.createElement("form",null,n.a.createElement("div",{className:"container contai-busqueda"},n.a.createElement("div",{className:"row  d-flex  justify-content-center"},n.a.createElement("label",{className:"busqueda"},"Los mejores productos...")),n.a.createElement("div",{className:"row d-flex justify-content-center"},n.a.createElement("input",{className:"formBusqueda  col-10 col-md-8 col-lg-6 offset-1 offset-md-2 offset-lg-3",type:"text",name:"search",value:this.state.search,onChange:this.handleChange,placeholder:"Busca por articulo"})))))}}]),t}(r.Component),J=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).changeProducts=function(e){r.setState({productos:e})},r.state={productos:[]},r}return Object(s.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(G,{changeProducts:this.changeProducts}),n.a.createElement(D,{editable:!1,profile:!1,productos:this.state.productos}))}}]),t}(r.Component),W=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).refresh=function(){r.props.totalpedido(r.props.nombre,r.props.qte)},r.state={producto:""},r}return Object(s.a)(t,[{key:"render",value:function(){var e=this.props.prod.precio*this.props.prod.quantity,a="";return a=0===this.props.prod.quantity?"":n.a.createElement("div",{className:"row articulo"},n.a.createElement("div",{className:"col"},this.props.prod.quantity," x ",this.props.prod.nombre),n.a.createElement("div",{className:"col"},"Precio: ",this.props.prod.precio,"\u20ac"),n.a.createElement("div",{className:"col"},"Total: ",e,"\u20ac")),n.a.createElement("div",{className:""},a)}}]),t}(r.Component),Y=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).handleChange=function(e){var a=e.target,t=a.name,n=a.value;r.setState(Object(g.a)({},t,n))},r.handleFormSubmit=function(e){e.preventDefault();for(var a=[],t=0;t<r.props.pedidos.length;++t){var n={nombre:r.props.pedidos[t].nombre,precio:r.props.pedidos[t].precio,cantidad:r.props.pedidos[t].quantity};a.push(n),console.log(a)}var o=r.state,c=o.nombre,l=o.telefono,s=o.email,i=o.recogida,m=r.props.precioFinal,u={idUsuario:r.props.pedidos[0].idUsuario,items:a,nombre:c,telefono:l,email:s,recogida:i,precioTotal:m};E.a.post("".concat("https://sugar-place.herokuapp.com","/api/pedido/"),u,{withCredentials:!0}).then((function(e){r.setState({nombre:"",telefono:"",email:""});e.data._id})).catch((function(e){console.log(e.response.data.message),r.setState({message:e.response.data.message})}))},r.state={nombre:"",telefono:"",email:"",recogida:"1 hora"},r}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a="";return this.state.message&&(a=n.a.createElement("small",{className:"form-text"},this.state.message)),n.a.createElement(U.a,Object.assign({},this.props,{"aria-labelledby":"contained-modal-title-vcenter"}),n.a.createElement(U.a.Header,{closeButton:!0},n.a.createElement(U.a.Title,null,"Finaliza tu pedido")),n.a.createElement("div",{className:"container"},n.a.createElement("form",{onSubmit:this.handleFormSubmit},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Nombre*"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"nombre",value:this.state.nombre,onChange:function(a){return e.handleChange(a)}})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Telefono*"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"telefono",value:this.state.telefono,onChange:function(a){return e.handleChange(a)}})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Email"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"email",value:this.state.email,onChange:function(a){return e.handleChange(a)}})),n.a.createElement("div",{class:"form-group"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col"},n.a.createElement("label",{class:"mr-sm-2"},"Recoger en tienda en*:  ")),n.a.createElement("div",{className:"col"},n.a.createElement("select",{class:"custom-select mr-sm-2",name:"recogida",value:this.state.recogida,onChange:function(a){return e.handleChange(a)}},n.a.createElement("option",{value:"1 hora"},"1 hora"),n.a.createElement("option",{value:"2 horas"},"2 horas"),n.a.createElement("option",{value:"3 horas"},"3 horas"),n.a.createElement("option",{value:"4 horas"},"4 horas"))))),n.a.createElement("small",{className:"form-text text-muted"},"*Campos obligatorios"),a,n.a.createElement(U.a.Footer,null,n.a.createElement("button",{className:"btn boton-form",type:"submit"},"Pedir")))))}}]),t}(r.Component),V=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).openModal=function(){r.setState({modalOpen:!0})},r.closeModal=function(){r.setState({modalOpen:!1})},r.state={modalOpen:!1,items:[]},r}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a=[],t=0;for(var r in this.props.pedido)this.props.pedido.hasOwnProperty(r)&&(t+=this.props.pedido[r].precio*this.props.pedido[r].quantity,a.push({producto_id:r,quantity:this.props.pedido[r].quantity,precio:this.props.pedido[r].precio,nombre:this.props.pedido[r].nombre,idUsuario:this.props.pedido[r].idUsuario}));var o=a.map((function(e){return n.a.createElement(W,{key:e.producto_id,id:e.producto_id,prod:e})}));return console.log("pedidos",a),n.a.createElement("div",null,n.a.createElement("h1",{className:"tit-pedido"},"Pedido"),o,n.a.createElement("div",{className:"row total"},n.a.createElement("div",{className:"col"},n.a.createElement("p",{className:"precioTotal"},"TOTAL: ",t," \u20ac")),n.a.createElement("div",{className:"col"},n.a.createElement(k.a,{className:"btn-tramitar",variant:"primary",onClick:this.openModal},"Tramitar Pedido"))),n.a.createElement(Y,{show:this.state.modalOpen,onHide:function(){return e.closeModal()},pedidos:a,precioFinal:t}))}}]),t}(r.Component),K=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).modifyItem=function(e,a,t,n,o){var c=r.state.pedido;c[e]={quantity:a,precio:t,nombre:n,idUsuario:o},r.setState({pedido:c}),console.log(c)},r.state={user:null,pedido:{}},r}return Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.a.get("".concat("https://sugar-place.herokuapp.com","/api/usuario/")+this.props.match.params.id,{withCredentials:!0}).then((function(a){e.setState({user:a.data})}))}},{key:"render",value:function(){var e="";return e=0===Object.keys(this.state.pedido).length?"":n.a.createElement("div",{className:"pedido"},n.a.createElement("div",{className:"container"},n.a.createElement(V,{pedido:this.state.pedido,ordenFinalizada:this.ordenFinalizada}))),n.a.createElement("div",null,n.a.createElement("div",{className:"container tienda mb-60"},n.a.createElement("h1",{className:"mt-30 perfil"}),n.a.createElement(H,{user:this.state.user}),n.a.createElement(D,{userId:this.props.match.params.id,modifyItem:this.modifyItem})),e)}}]),t}(r.Component),Q=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).state={pedido:{}},r}return Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.a.get("".concat("https://sugar-place.herokuapp.com","/api/pedido/")+this.props.match.params.id,{withCredentials:!0}).then((function(a){e.setState({pedido:a.data[0]}),console.log(a.data)}))}},{key:"render",value:function(){return n.a.createElement("div",{className:"container fin-pedido"},"Gracias ",this.state.pedido.nombre," por realizar tu pedido.",n.a.createElement("br",null),"Tu pedido es el numero ",n.a.createElement("b",null,this.state.pedido.numeroPedido),".",n.a.createElement("br",null),"Lo podras recoger en ",this.state.pedido.recogida,".",n.a.createElement("br",null),n.a.createElement("div",{className:"div-volver"},n.a.createElement(h.b,{className:"volver",to:"/"},"Volver")))}}]),t}(r.Component),Z=t(295),$=t(296),X=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(s.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col"},n.a.createElement("p",null,this.props.infoPedido.nombre)),n.a.createElement("div",{className:"col"},n.a.createElement("p",null,"Precio: ",this.props.infoPedido.precio)),n.a.createElement("div",{className:"col"},n.a.createElement("p",null,"Cantidad: ",this.props.infoPedido.cantidad))))}}]),t}(r.Component);var ee=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).handleChange=function(){var e=Object(w.a)(x.a.mark((function e(a){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.setState({status:a.target.value});case 2:r.handleFormSubmit(a);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),r.handleFormSubmit=function(){var e=Object(w.a)(x.a.mark((function e(a){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.state.status,E.a.patch("".concat("https://sugar-place.herokuapp.com","/api/pedido/").concat(r.props.pedido._id),{status:t},{withCredentials:!0}).then((function(e){console.log(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),r.state={status:r.props.pedido.status},r}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a=[{name:"Nuevo",value:"Nuevo"},{name:"Preparacion",value:"EnPreparacion"},{name:"Finalizado",value:"Finalizado"},{name:"Entregado",value:"Entregado"},{name:"Cancelado",value:"Cancelado"}].map((function(a,t){return n.a.createElement(Z.a,{key:t,className:"toggle nuevo ",type:"radio",variant:"secondary",name:"status",value:a.value,checked:e.state.status===a.value,onChange:function(a){return e.handleChange(a)}},a.name)})),t=this.props.pedido.items.map((function(e){return n.a.createElement(X,{key:e._id,infoPedido:e})})),r=Date.parse(this.props.pedido.created_at),o=function(e){var a=(e/1e3).toFixed(0),t=(e/6e4).toFixed(0),r=(e/36e5).toFixed(0),n=(e/864e5).toFixed(0);return a<60?a+" Segundos":t<60?t+" Min":r<24?r+" Horas, "+t%60+" minutos":n+" D\xedas, "+r%24+" horas"}(new Date-r);return n.a.createElement("div",{className:"pedido-baker"},n.a.createElement("div",{className:"container  mb-50 mt-30"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col"},n.a.createElement("p",{className:"numero-pedido"},"Pedido Numero ",this.props.pedido.numeroPedido," ")),n.a.createElement("div",{className:"col"},n.a.createElement("p",{className:"fecha"},"Hace ",o," "))),n.a.createElement("div",{className:" row"},n.a.createElement("div",{className:"col"},n.a.createElement("p",{className:"datos"},"Nombre: ",this.props.pedido.nombre," ")),n.a.createElement("div",{className:"col"},n.a.createElement("p",{className:"datos"},"Telefono: ",this.props.pedido.telefono))),n.a.createElement("p",{className:"fecha"},"Entregar en:  ",this.props.pedido.recogida," "),n.a.createElement("p",{className:"detalles"},"Detalles del pedido:"),t,n.a.createElement("p",{className:"precio-total"},"Total:",this.props.pedido.precioTotal,"\u20ac"),n.a.createElement("p",null," Estado:",this.state.status),n.a.createElement($.a,{vertical:!0,toggle:!0},a)))}}]),t}(r.Component),ae=t(297),te=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).handleChange=function(){var e=Object(w.a)(x.a.mark((function e(a){var t,n,o,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.target,o=n.name,c=n.value,e.next=3,r.setState((t={},Object(g.a)(t,o,c),Object(g.a)(t,"filtro",!0),t));case 3:r.actualizarPedidos();case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),r.state={first:!0,pedidos:[],filtroEstado:null,filtro:!1,notification:!1},r}return Object(s.a)(t,[{key:"componentWillUnmount",value:function(){this.timer=null}},{key:"closeNotification",value:function(){this.setState({notification:!1})}},{key:"actualizarPedidos",value:function(){var e=this;this.state.filtro?E.a.get("".concat("https://sugar-place.herokuapp.com","/api/pedido/all/?status=")+this.state.filtroEstado+"&time="+(new Date).valueOf(),{withCredentials:!0}).then((function(a){var t=e.state.pedidos.length,r=a.data.length;(e.state.first||t>0&&t<r)&&(e.state.first||e.setState({notification:!0}),e.setState({pedidos:a.data,first:!1}))})).catch((function(e){console.log(e)})):E.a.get("".concat("https://sugar-place.herokuapp.com","/api/pedido/all/")+"?time="+(new Date).valueOf(),{withCredentials:!0}).then((function(a){var t=e.state.pedidos.length,r=a.data.length;(e.state.first||t>0&&t<r)&&(e.state.first||e.setState({notification:!0}),e.setState({pedidos:a.data,first:!1}))})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval((function(){return e.actualizarPedidos()}),1e4),this.actualizarPedidos()}},{key:"render",value:function(){var e=this,a=this.state.pedidos.sort((function(e,a){return a.numeroPedido-e.numeroPedido})).map((function(e){return n.a.createElement(ee,{key:e._id,pedido:e})})),t="";return this.state.notification&&(t=n.a.createElement(ae.a,{variant:"success",onClose:function(){return e.closeNotification()},dismissible:!0},"Pedido nuevo")),n.a.createElement("div",{className:""},n.a.createElement("div",{className:"container"},t,n.a.createElement("form",null,n.a.createElement("div",{class:"form-group "},n.a.createElement("div",{className:"row mt-30"},n.a.createElement("div",{className:"col"},n.a.createElement("label",{class:"mr-sm-2"},"Filtrar por estado:")),n.a.createElement("div",{className:"col-5 col-md-4 col-lg-4"},n.a.createElement("select",{class:"custom-select sel-status",name:"filtroEstado",value:this.state.filtroEstado,onChange:function(a){return e.handleChange(a)}},n.a.createElement("option",{value:"",selected:!0},"Todos"),n.a.createElement("option",{value:"Nuevo"},"Nuevo"),n.a.createElement("option",{value:"EnPreparacion"},"En preparacion"),n.a.createElement("option",{value:"Finalizado"},"Finalizado"),n.a.createElement("option",{value:"Entregado"},"Entregado"),n.a.createElement("option",{value:"Cancelado"},"Cancelado"))))))),a)}}]),t}(r.Component),re=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var r;Object(l.a)(this,t),(r=a.call(this,e)).getTheUser=function(e){r.setState({loggedInUser:e}),localStorage.setItem("user",JSON.stringify(e))};var n=JSON.parse(localStorage.getItem("user"));return r.state={loggedInUser:n},r}return Object(s.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(f,{user:this.state.loggedInUser,key:this.state.loggedInUser}),n.a.createElement(u.d,null,n.a.createElement(u.b,{exact:!0,path:"/"},n.a.createElement(J,null)),n.a.createElement(u.b,{exact:!0,path:"/signup",render:function(a){return n.a.createElement(y,Object.assign({},a,{getUser:e.getTheUser}))}}),n.a.createElement(u.b,{exact:!0,path:"/login",render:function(a){return n.a.createElement(N,Object.assign({},a,{getUser:e.getTheUser}))}}),n.a.createElement(u.b,{exact:!0,path:"/logout",render:function(a){return n.a.createElement(C,Object.assign({},a,{getUser:e.getTheUser}))}}),n.a.createElement(u.b,{path:"/formbaker",render:function(a){return n.a.createElement(A,Object.assign({},a,{getUser:e.getTheUser,user:e.state.loggedInUser}))}}),n.a.createElement(u.b,{exact:!0,path:"/profile",render:function(a){return n.a.createElement(q,Object.assign({},a,{getUser:e.getTheUser,user:e.state.loggedInUser}))}}),n.a.createElement(u.b,{exact:!0,path:"/pedidos",component:te}),n.a.createElement(u.b,{exact:!0,path:"/baker/:id",component:K}),n.a.createElement(u.b,{exact:!0,path:"/pedido/:id",component:Q})))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(h.a,null,n.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[144,1,2]]]);
//# sourceMappingURL=main.fd08d5c2.chunk.js.map