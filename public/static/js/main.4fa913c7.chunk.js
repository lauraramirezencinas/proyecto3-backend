(this["webpackJsonpsugar-place"]=this["webpackJsonpsugar-place"]||[]).push([[0],{146:function(e,a,t){e.exports=t(295)},151:function(e,a,t){},152:function(e,a,t){},295:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(18),c=t.n(o),l=(t(151),t(3)),s=t(5),i=t(7),m=t(6),u=(t(152),t(12)),d=(t(153),t(302)),p=t(301),h=t(13),f=t(41),g=t.n(f),v=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(s.a)(t,[{key:"componentDidMount",value:function(){g()(".nav-item").click((function(){g()(this).addClass("active1").siblings().removeClass("active1")}))}},{key:"render",value:function(){var e=r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.b,{to:"/login"},"Login   ")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.b,{to:"/signup"},"Sign up")));return this.props.user&&(console.log("Hay usuario logueado!"),e=r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.b,{to:"/profile",className:"nav-link"},"Perfil")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.b,{to:"/pedidos",className:"nav-link"},"Pedidos")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.b,{to:"/reviews",className:"nav-link"},"Rese\xf1as")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.b,{to:"/logout",className:"nav-link"},"Hola ",this.props.user.nombre,",Logout ")))),r.a.createElement(d.a,{expand:"lg"},r.a.createElement("div",{className:"container"},r.a.createElement(d.a.Brand,{className:"nav-logo",href:"/"},"Sugar-Place"),r.a.createElement(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(d.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(p.a,{className:"mr-auto"},e))))}}]),t}(n.Component),b=t(14),E=t(9),N=t.n(E),C=function e(){var a=this;Object(l.a)(this,e),this.signup=function(e,t,n,r,o){return a.service.post("/signup",{nombre:e,apellido:t,email:n,password:r,isBaker:o}).then((function(e){return e.data}))},this.loggedin=function(){return a.service.get("/loggedin").then((function(e){return e.data}))},this.login=function(e,t){return a.service.post("/login",{email:e,password:t}).then((function(e){return e.data}))},this.logout=function(){return a.service.post("/logout",{}).then((function(e){return e.data}))};var t=N.a.create({baseURL:"".concat("https://sugar-place.herokuapp.com","/api/auth"),withCredentials:!0});this.service=t},O=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleChange=function(e){var a=e.target,t=a.name,r=a.value;n.setState(Object(b.a)({},t,r))},n.handleFormSubmit=function(e){e.preventDefault(),console.log("hola");var a=n.state,t=a.email,r=a.password;n.service.login(t,r).then((function(e){n.props.getUser(e),n.setState({email:"",password:"",redirect:!0}),console.log(e)})).catch((function(e){console.log(e.response.data.message),n.setState({message:e.response.data.message})}))},n.renderRedirect=function(){if(!0===n.state.redirect)return r.a.createElement(u.a,{to:"/profile"})},n.state={email:"",password:"",redirect:!1,message:""},n.service=new C,n}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a="";return this.state.message&&(a=r.a.createElement("small",{className:"form-text text-muted"},this.state.message)),r.a.createElement("div",{className:"container mt-80"},r.a.createElement("div",{className:"col-12 col-md-8 col-lg-6 offset-md-2 offset-lg-3"},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"mt-30"},r.a.createElement("h4",{className:"title-form"}," Inicia sesi\xf3n")),r.a.createElement("div",{className:"form-group "},r.a.createElement("input",{type:"email",className:"form-control",name:"email",value:this.state.email,onChange:function(a){return e.handleChange(a)},"aria-describedby":"emailHelp",placeholder:"Introduce tu email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-control",id:"exampleInputPassword1",name:"password",value:this.state.password,onChange:function(a){return e.handleChange(a)},placeholder:"Password"})),r.a.createElement("button",{class:"btn boton-form",type:"submit"},"Log in"),a,r.a.createElement("div",{className:"mt-30 mb-50"},r.a.createElement("p",{className:"extra-form"},"\xbfNo tienes una cuenta?"),r.a.createElement(h.b,{xlassName:"extra-form",to:"/signup"}," Registrate")),this.renderRedirect())))}}]),t}(n.Component),y=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).service=new C,n}return Object(s.a)(t,[{key:"render",value:function(){var e=this;return this.service.logout().then((function(a){e.props.getUser(null)})).catch((function(e){return console.log(e)})),r.a.createElement(u.a,{to:"/"})}}]),t}(n.Component),k=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleChange=function(e){var a=e.target,t=a.name,r=a.value;n.setState(Object(b.a)({},t,r))},n.handleFormSubmit=function(e){e.preventDefault();var a=n.state,t=a.nombre,r=a.apellido,o=a.email,c=a.password,l=a.isBaker;n.service.signup(t,r,o,c,l).then((function(e){n.props.getUser(e),n.setState({nombre:"",apellido:"",email:"",password:"",isBaker:e.isBaker,redirect:!0})})).catch((function(e){console.log(e.response.data.message),n.setState({message:e.response.data.message})}))},n.renderRedirect=function(){if(!0===n.state.redirect&&!1===n.state.isBaker)return r.a.createElement(u.a,{to:"/"});if(!0===n.state.redirect&&!0===n.state.isBaker){n.props.getUser.id;return r.a.createElement(u.a,{to:"/formbaker"})}},n.state={nombre:"",apellido:"",email:"",password:"",isBaker:!1,redirect:!1},n.service=new C,n}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a="";return this.state.message&&(a=r.a.createElement("small",{className:"form-text text-muted"},this.state.message)),r.a.createElement("div",{className:"container mt-80"},r.a.createElement("div",{className:"col-12 col-md-8 col-lg-6 offset-md-2 offset-lg-3"},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"mt-30"},r.a.createElement("h4",{className:"title-form"},"Registrate")),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"nombre",value:this.state.nombre,onChange:function(a){return e.handleChange(a)},"aria-describedby":"emailHelp",placeholder:"Introduce tu nombre"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",name:"apellido",value:this.state.apellido,onChange:function(a){return e.handleChange(a)},"aria-describedby":"emailHelp",placeholder:"Introduce tu apellido"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",className:"form-control",name:"email",value:this.state.email,onChange:function(a){return e.handleChange(a)},"aria-describedby":"emailHelp",placeholder:"Introduce tu email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-control",id:"exampleInputPassword1",name:"password",value:this.state.password,onChange:function(a){return e.handleChange(a)},placeholder:"Password"})),r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"exampleCheck1",name:"isBaker",onChange:function(a){return e.handleChange(a)},value:"true"}),r.a.createElement("label",{className:"form-check-label extra-form",for:"exampleCheck1"},"Soy una panaderia"," ")),r.a.createElement("button",{className:"btn boton-form",type:"submit"},"Registrame"),a,r.a.createElement("div",{className:"mt-30 mb-50"},r.a.createElement("p",{className:"extra-form"},"\xbfYa tienes una cuenta?"),r.a.createElement(h.b,{className:"extra-form",to:"/login"}," Login")),this.renderRedirect())))}}]),t}(n.Component),j=(t(145),t(144)),w=t(141),x=t(11),S=t.n(x),I=t(19),U=t(303),P=t(42),F=t(300),D=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleChange=function(e){var a=e.target,t=a.name,r=a.value;n.setState(Object(b.a)({},t,r))},n.handleFormSubmit=function(e){e.preventDefault(),n.props.onHide();var a=n.state,t=a.nombre,r=a.descripcion,o=a.precio,c=a.ingredientes;N.a.patch("".concat("https://sugar-place.herokuapp.com","/api/producto/").concat(n.props.producto._id),{nombre:t,descripcion:r,precio:o,ingredientes:c},{withCredentials:!0}).then((function(e){window.location.href="/profile/"}))},n.state={nombre:n.props.producto.nombre,descripcion:n.props.producto.descripcion,precio:n.props.producto.precio,ingredientes:n.props.producto.ingredientes,imagenUrl:n.props.producto.imagenUrl},n}return Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(F.a,Object.assign({},this.props,{"aria-labelledby":"contained-modal-title-vcenter"}),r.a.createElement(F.a.Header,{closeButton:!0},r.a.createElement(F.a.Title,null,"Editar Producto")),r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Nombre"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"nombre",value:this.state.nombre,onChange:function(a){return e.handleChange(a)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Descripci\xf3n"),r.a.createElement("textarea",{className:"form-control",id:"exampleFormControlTextarea1",maxLength:"90",rows:"3",name:"descripcion",value:this.state.descripcion,onChange:function(a){return e.handleChange(a)}}),r.a.createElement("small",{className:"form-text text-muted"},"Introduce una descripcion de tu producto (m\xe1ximo 90 caracteres)")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Precio"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"precio",value:this.state.precio,onChange:function(a){return e.handleChange(a)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Ingredientes"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"ingredientes",value:this.state.ingredientes,onChange:function(a){return e.handleChange(a)}})),r.a.createElement(F.a.Footer,null,r.a.createElement("button",{className:"btn boton-form",type:"submit"},"Guardar")))))}}]),t}(n.Component),T=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleClick=function(){var e="/baker/"+n.props.producto.idUsuario._id;window.location.href=e},n.openModal=function(){n.setState({modalOpen:!0})},n.closeModal=function(){n.setState({modalOpen:!1})},n.increment=Object(I.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({count:n.state.count+1});case 2:n.props.modifyItem(n.props.producto._id,n.state.count,n.props.producto.precio,n.props.producto.nombre,n.props.producto.idUsuario._id);case 3:case"end":return e.stop()}}),e)}))),n.decrement=Object(I.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({count:n.state.count-1});case 2:n.state.count<0&&n.setState({count:0}),n.props.modifyItem(n.props.producto._id,n.state.count,n.props.producto.precio,n.props.producto.nombre,n.props.producto.idUsuario._id);case 4:case"end":return e.stop()}}),e)}))),n.deleteProduct=function(){N.a.delete("".concat("https://sugar-place.herokuapp.com","/api/producto/").concat(n.props.producto._id)).then((function(){window.location.href="/profile/"})).catch((function(e){console.log(e)}))},n.state={modalOpen:!1,count:0},n.handleClick=n.handleClick.bind(),n.openModal=n.openModal.bind(),n.closeModal=n.closeModal.bind(),n.deleteProduct=n.deleteProduct.bind(),n}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a="";return a=this.props.editable?r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a.Body,{className:"productCard"},r.a.createElement(P.CloudinaryContext,{cloudName:"dry1b4yex"},r.a.createElement(P.Image,{className:"img-cloudy",publicId:this.props.producto.imageName,height:"200",width:"350",crop:"fill",alt:"producto"})),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row card-row"},r.a.createElement("div",{className:"col-8 "},r.a.createElement(U.a.Title,{className:"nombre-producto"},this.props.producto.nombre)),r.a.createElement("div",{className:"col-4"},r.a.createElement("p",{className:"precio"},this.props.producto.precio," \u20ac"))),r.a.createElement(U.a.Text,{className:"mb-30"},r.a.createElement("p",{className:"baker-card mh-100"},this.props.producto.descripcion),r.a.createElement("p",{className:"ingredients-card"},this.props.producto.ingredientes)),r.a.createElement(w.a,{className:"boton-editar",variant:"primary",onClick:this.openModal},"Editar"),r.a.createElement(D,{producto:this.props.producto,show:this.state.modalOpen,onHide:function(){return e.closeModal()}}),r.a.createElement(w.a,{className:"boton-borrar",variant:"primary",onClick:this.deleteProduct},"Borrar")))):this.props.isStore?r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a.Body,{className:"productCard card-clik"},r.a.createElement(P.CloudinaryContext,{cloudName:"dry1b4yex"},r.a.createElement(P.Image,{className:"img-cloudy",publicId:this.props.producto.imageName,height:"200",width:"350",crop:"fill",alt:"producto"})),r.a.createElement("div",{className:"container "},r.a.createElement("div",{className:"row card-row"},r.a.createElement("div",{className:"col-8"},r.a.createElement(U.a.Title,{className:"nombre-producto"},this.props.producto.nombre)),r.a.createElement("div",{className:"col-4"},r.a.createElement("p",{className:"precio"},this.props.producto.precio," \u20ac"))),r.a.createElement(U.a.Text,null,r.a.createElement("p",{className:"baker-card mh-100"},this.props.producto.descripcion),r.a.createElement("p",{className:"ingredients-card"},this.props.producto.ingredientes))),r.a.createElement("div",{className:"row counter"},r.a.createElement("button",{className:"inc",onClick:this.decrement},"-"),r.a.createElement("p",{className:"count"},this.state.count),r.a.createElement("button",{className:"inc",onClick:this.increment},"+")))):r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a.Body,{className:"productCard card-clik",onClick:this.handleClick},r.a.createElement(P.CloudinaryContext,{cloudName:"dry1b4yex"},r.a.createElement(P.Image,{className:"img-cloudy",publicId:this.props.producto.imageName,height:"200",width:"350",crop:"fill",alt:"producto"})),r.a.createElement("div",{className:"container "},r.a.createElement("div",{className:"row card-row"},r.a.createElement("div",{className:"col-8 "},r.a.createElement(U.a.Title,{className:"nombre-producto"},this.props.producto.nombre)),r.a.createElement("div",{className:"col-4"},r.a.createElement("p",{className:"precio"},this.props.producto.precio," \u20ac"))),r.a.createElement(U.a.Text,null,r.a.createElement("p",{className:"baker-card mh-100"},this.props.producto.descripcion),r.a.createElement("p",{className:"ingredients-card"},this.props.producto.ingredientes)),r.a.createElement("div",{className:"row mt-30 mb-30"},r.a.createElement("div",{className:"col-3"},r.a.createElement("img",{src:this.props.producto.idUsuario.logoUrl,className:"img-card rounded-circle",alt:"logo"})),r.a.createElement("div",{className:"col-6 col-logo"},r.a.createElement("p",{className:"baker-card baker-name"},this.props.producto.idUsuario.nombreNegocio),r.a.createElement("p",{className:"baker-card"},this.props.producto.idUsuario.horario)),r.a.createElement("div",{className:"col-3"},r.a.createElement("img",{src:"../images/tienda.png",className:"img-tienda",alt:"tienda"})))))),r.a.createElement(U.a,{className:"shadow mb-5"},a)}}]),t}(n.Component),M=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).state={productos:[]},n}return Object(s.a)(t,[{key:"refresh",value:function(){var e=this;this.props.productos&&0!=this.props.productos.length?this.setState({productos:this.props.productos}):this.props.profile?N.a.get("".concat("https://sugar-place.herokuapp.com","/api/producto/profile/"),{withCredentials:!0}).then((function(a){e.setState({productos:a.data})})):this.props.userId?N.a.get("".concat("https://sugar-place.herokuapp.com","/api/producto/all/?user_id=")+this.props.userId).then((function(a){e.setState({productos:a.data})})):N.a.get("".concat("https://sugar-place.herokuapp.com","/api/producto/all/")+"?time="+(new Date).valueOf()).then((function(a){e.setState({productos:a.data})}))}},{key:"componentDidUpdate",value:function(e){e.productos!==this.props.productos&&this.refresh()}},{key:"componentDidMount",value:function(){this.refresh()}},{key:"render",value:function(){var e=this,a=this.state.productos.map((function(a){return r.a.createElement(T,{key:a._id,producto:a,editable:e.props.editable,isStore:null!=e.props.userId,modifyItem:e.props.modifyItem})}));return r.a.createElement("div",{className:"card-columns container grid mt-40"},a)}}]),t}(n.Component),R=t(23),_=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleChange=function(e){var a=e.target,t=a.name,r=a.value;n.setState(Object(b.a)({},t,r))},n.handleFormSubmit=function(e){e.preventDefault(),n.props.onHide();var a=n.state,t=a.nombre,r=a.apellido,o=a.email,c=a.nombreNegocio,l=a.descripcion,s=a.calleNumero,i=a.horario,m=a.logoUrl,u=a.facebook,d=a.instagram;N.a.patch("".concat("https://sugar-place.herokuapp.com","/api/usuario/").concat(n.props.user._id),{nombre:t,apellido:r,email:o,nombreNegocio:c,descripcion:l,calleNumero:s,horario:i,logoUrl:m,facebook:u,instagram:d},{withCredentials:!0}).then((function(e){n.props.getUser(e.data.user);window.location.href="/profile/"}))},n.state={nombre:n.props.user.nombre,apellido:n.props.user.apellido,email:n.props.user.email,nombreNegocio:n.props.user.nombreNegocio,descripcion:n.props.user.descripcion,calleNumero:n.props.user.direccion.calleNumero,horario:n.props.user.horario,logoUrl:n.props.user.logoUrl,facebook:n.props.user.facebook,instagram:n.props.user.instagram},n.handleChange=n.handleChange.bind(Object(R.a)(n)),n.handleFormSubmit=n.handleFormSubmit.bind(Object(R.a)(n)),n}return Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(F.a,Object.assign({},this.props,{"aria-labelledby":"contained-modal-title-vcenter"}),r.a.createElement(F.a.Header,{closeButton:!0},r.a.createElement(F.a.Title,null,"Editar Perfil")),r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Nombre"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"nombre",value:this.state.nombre,onChange:function(a){return e.handleChange(a)}}),r.a.createElement("input",{type:"hidden",className:"form-control",placeholder:"",name:"logoUrl",value:this.state.logoUrl,onChange:function(a){return e.handleChange(a)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Apellido"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"apellido",value:this.state.apellido,onChange:function(a){return e.handleChange(a)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"email",value:this.state.email,onChange:function(a){return e.handleChange(a)}})),r.a.createElement("h4",{className:"direccion"},"Direcci\xf3n"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label-form"},"Calle y Numero"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"calleNumero",value:this.state.calleNumero,onChange:function(a){return e.handleChange(a)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Nombre de la Panaderia"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"nombreNegocio",value:this.state.nombreNegocio,onChange:function(a){return e.handleChange(a)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Descripci\xf3n"),r.a.createElement("textarea",{className:"form-control",id:"exampleFormControlTextarea1",rows:"3",name:"descripcion",value:this.state.descripcion,onChange:function(a){return e.handleChange(a)}}),r.a.createElement("small",{className:"form-text text-muted"},"Introduce una descripcion de tu producto")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Horario"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"horario",value:this.state.horario,onChange:function(a){return e.handleChange(a)}})),r.a.createElement(F.a.Footer,null,r.a.createElement("button",{className:"btn boton-form",type:"submit"},"Guardar")))))}}]),t}(n.Component),B=t(142),H=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).state={lat:"",lng:"",calleNumero:n.props.bakery.direccion.calleNumero},n}return Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;N.a.get("".concat("https://sugar-place.herokuapp.com","/api/maps?search=")+this.state.calleNumero+"&time="+(new Date).valueOf()).then((function(a){console.log("mapa",a.data),e.setState({lat:a.data.candidates[0].geometry.location.lat,lng:a.data.candidates[0].geometry.location.lng,direccion:a.data.candidates[0].formatted_address})}))}},{key:"render",value:function(){var e=this,a={lat:this.state.lat,lng:this.state.lng};return r.a.createElement("div",{className:"mapa"},r.a.createElement(B.a,{key:this.state.direccion,bootstrapURLKeys:{key:"AIzaSyBT0RpL1Yw7Q5WC4WemS6hyJ_Y3PnSUyfY"},defaultCenter:a,defaultZoom:15,options:function(e){return{disableDefaultUI:!1,mapTypeControl:!0,streetViewControl:!0,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"on"}]}]}},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(a){return function(a,t){var n={lat:e.state.lat,lng:e.state.lng};new t.Marker({position:n,map:a,title:e.state.direccion})}(a.map,a.maps)}}))}}]),t}(n.Component),z=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).openModal=function(){n.setState({modalOpen:!0})},n.closeModal=function(){n.setState({modalOpen:!1})},n.state={modalOpen:!1},n.openModal=n.openModal.bind(),n.closeModal=n.closeModal.bind(),n}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a="";return this.props.user&&(a=this.props.profile?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-xs-12 col-md-4 mt-20"},r.a.createElement("img",{src:this.props.user.logoUrl,className:"img-perfil rounded-circle",alt:"logo"})),r.a.createElement("div",{className:"col-xs-12 col-md-4 mt-20"},r.a.createElement("p",{className:"bak-campos"},"NOMBRE:  ",r.a.createElement("span",{className:"bak-val"},this.props.user.nombre)),r.a.createElement("p",{className:"bak-campos"},"APELLIDO:  ",r.a.createElement("span",{className:"bak-val"},this.props.user.apellido)),r.a.createElement("p",{className:"bak-campos"},"EMAIL: ",r.a.createElement("span",{className:"bak-val"},this.props.user.email)),r.a.createElement("p",{className:"bak-campos"},"DIRECC\xd3N: ",r.a.createElement("span",{className:"bak-val"},this.props.user.direccion.calleNumero," ")),r.a.createElement("p",{className:"bak-campos"},"NOMBRE DE LA PANADERIA:  ",r.a.createElement("span",{className:"bak-val"},this.props.user.nombreNegocio)),r.a.createElement("p",{className:"bak-campos"},"DESCRIPCION:  ",r.a.createElement("span",{className:"bak-val"},this.props.user.descripcion)),r.a.createElement("p",{className:"bak-campos"},"HORARIO:  ",r.a.createElement("span",{className:"bak-val"},this.props.user.horario)),r.a.createElement(w.a,{className:"boton-editar",variant:"primary",onClick:this.openModal},"Editar perfil"),r.a.createElement(_,{user:this.props.user,getUser:this.props.getUser,show:this.state.modalOpen,onHide:function(){return e.closeModal()}}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-xs-12 col-md-4 mt-20 bakery"},r.a.createElement("img",{src:this.props.user.logoUrl,className:"img-perfil rounded-circle",alt:"logo"})),r.a.createElement("div",{className:"col-xs-12 col-md-8 mt-20"},r.a.createElement("h1",{className:"perfil mb-20 bakery"},this.props.user.nombreNegocio),r.a.createElement("p",{className:"bak-campos"},"DESCRIPCION:  ",r.a.createElement("span",{className:"bak-val"},this.props.user.descripcion)),r.a.createElement("p",{className:"bak-campos"},"DIRECC\xd3N: ",r.a.createElement("span",{className:"bak-val"},this.props.user.direccion.calleNumero," ")),r.a.createElement("p",{className:"bak-campos"},"HORARIO:  ",r.a.createElement("span",{className:"bak-val"},this.props.user.horario)),r.a.createElement(H,{bakery:this.props.user})))),r.a.createElement("div",{className:"row container "},a)}}]),t}(n.Component);var A=function(e){return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Imagen*"),r.a.createElement("input",{type:"file",className:"",placeholder:"",name:e.fieldName,onChange:function(a){e.handleImageChange(a.target.files[0])}}))},L=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleChange=function(e){var a=e.target,t=a.name,r=a.value;n.setState(Object(b.a)({},t,r))},n.handleImageChange=function(e){n.setState({imagenUrl:e})},n.handleFormSubmit=function(e){e.preventDefault();var a=new FormData;a.append("nombre",n.state.nombre),a.append("descripcion",n.state.descripcion),a.append("precio",n.state.precio),a.append("ingredientes",n.state.ingredientes),a.append("imagenUrl",n.state.imagenUrl);n.props.user._id;N.a.post("".concat("https://sugar-place.herokuapp.com","/api/producto/"),a,{headers:{"content-type":"multipart/form-data"},withCredentials:!0}).then(function(){var e=Object(I.a)(S.a.mark((function e(a){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a.data),e.next=3,n.setState({nombre:"",descripcion:"",precio:"",ingredientes:"",imagenUrl:"",message:""});case 3:n.props.onHide(),"/profile/",window.location.href="/profile/";case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){console.log(e.response.data.message),n.setState({message:e.response.data.message})}))},n.state={nombre:"",descripcion:"",precio:"",ingredientes:"",imagenUrl:"",message:""},n}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a="";return this.state.message&&(a=r.a.createElement("small",{className:"form-text errores"},this.state.message)),r.a.createElement(F.a,Object.assign({},this.props,{"aria-labelledby":"contained-modal-title-vcenter"}),r.a.createElement(F.a.Header,{closeButton:!0},r.a.createElement(F.a.Title,null,"Producto")),r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"hidden",className:"form-control",name:"idUsuario",onChange:function(a){return e.handleChange(a)}}),r.a.createElement("label",null,"Nombre*"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"nombre",value:this.state.nombre,onChange:function(a){return e.handleChange(a)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Descripci\xf3n*"),r.a.createElement("textarea",{className:"form-control",maxlength:"90",id:"exampleFormControlTextarea1",rows:"3",name:"descripcion",value:this.state.descripcion,onChange:function(a){return e.handleChange(a)}}),r.a.createElement("small",{className:"form-text text-muted"},"Introduce una descripcion de tu producto(m\xe1ximo 90 caracteres)")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Precio*"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"precio",value:this.state.precio,onChange:function(a){return e.handleChange(a)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Ingredientes*"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"ingredientes",value:this.state.ingredientes,onChange:function(a){return e.handleChange(a)}}),r.a.createElement("small",{className:"form-text text-muted"},"Introducir los ingredientes principales")),r.a.createElement(A,{handleImageChange:this.handleImageChange,fieldName:"imageUrl"}),r.a.createElement("small",{className:"form-text text-muted"},"*Campos obligatorios"),r.a.createElement(F.a.Footer,null,r.a.createElement("button",{className:"btn boton-form",type:"submit"},"Guardar"))),a))}}]),t}(n.Component);var q=function(e){var a=Object(n.useState)(!1),t=Object(j.a)(a,2),o=t[0],c=t[1],l=JSON.parse(localStorage.getItem("user"));return console.log("loggedInUser",l),r.a.createElement("div",{className:"container mt-30"},r.a.createElement("h1",{className:"perfil"}," Mi Perfil"),r.a.createElement(z,{user:l,getUser:e.getUser,profile:!0}),r.a.createElement("div",{className:"col-12"},r.a.createElement(w.a,{className:"boton",variant:"primary",onClick:function(){return c(!0)}},"A\xf1adir producto")),r.a.createElement(L,{show:o,onHide:function(){return c(!1)},user:l}),r.a.createElement(M,{editable:!0,profile:l}))},G=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleChange=function(e){var a=e.target,t=a.name,r=a.value;n.setState(Object(b.a)({},t,r))},n.handleImageChange=function(e){n.setState({logoUrl:e})},n.handleFormSubmit=function(e){var a=JSON.parse(localStorage.getItem("user"));console.log(a._id),e.preventDefault();var t=new FormData;t.append("nombreNegocio",n.state.nombreNegocio),t.append("descripcion",n.state.descripcion),t.append("calleNumero",n.state.calleNumero),t.append("ciudad",n.state.ciudad),t.append("horario",n.state.horario),t.append("logoUrl",n.state.logoUrl),N.a.patch("".concat("https://sugar-place.herokuapp.com","/api/usuario/").concat(a._id),t,{headers:{"content-type":"multipart/form-data"},withCredentials:!0}).then((function(e){n.props.getUser(e.data.user),n.setState({redirect:!0})})).catch((function(e){console.log(e.response.data.message),n.setState({message:e.response.data.message})}))},n.renderRedirect=function(){if(n.state.redirect)return r.a.createElement(u.a,{to:"/profile"})},n.state={nombreNegocio:"",descripcion:"",calleNumero:"",ciudad:"",horario:"",logoUrl:"",facebook:"",instagram:"",redirect:!1,message:""},n.handleChange=n.handleChange.bind(Object(R.a)(n)),n.handleFormSubmit=n.handleFormSubmit.bind(Object(R.a)(n)),n}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a="";return this.state.message&&(a=r.a.createElement("small",{className:"form-text text-muted"},this.state.message)),r.a.createElement("div",{className:"container mt-50 mb-100"},r.a.createElement("div",{className:"col-12 col-md-8 col-lg-6 offset-md-2 offset-lg-3"},r.a.createElement("h1",{className:"title-form"},"Panderia"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label-form"},"Nombre del Negocio*"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"nombreNegocio",value:this.state.nombreNegocio,onChange:function(a){return e.handleChange(a)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label-form"},"Descripci\xf3n*"),r.a.createElement("textarea",{className:"form-control",id:"exampleFormControlTextarea1",rows:"3",name:"descripcion",value:this.state.descripcion,onChange:function(a){return e.handleChange(a)}}),r.a.createElement("small",{className:"form-text text-muted"},"Introduce una descripcion de tu panaderia")),r.a.createElement("h4",{className:"direccion"},"Direcci\xf3n*"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label-form"},"Direcci\xf3n*"),r.a.createElement("small",{className:"form-text text-muted"},"Introduce Calle, Numero y Ciudad"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"calleNumero",value:this.state.calleNumero,onChange:function(a){return e.handleChange(a)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label-form"},"Horario"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"horario",value:this.state.horario,onChange:function(a){return e.handleChange(a)}})),r.a.createElement(A,{handleImageChange:this.handleImageChange,fieldName:"logoUrl"}),r.a.createElement("button",{class:"btn boton-form",type:"submit",userUpdate:this.updateProfile},"Guardar"),a,this.renderRedirect())))}}]),t}(n.Component),J={width:"100%",height:"290px",backgroundImage:"url(/images/busqueda.png)"},W=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleChange=function(){var e=Object(I.a)(S.a.mark((function e(a){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({search:a.target.value});case 2:n.updateIt();case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),n.state={search:""},n}return Object(s.a)(t,[{key:"updateIt",value:function(){var e=this;N.a.get("".concat("https://sugar-place.herokuapp.com","/api/producto/all/?search=")+this.state.search+"&time="+(new Date).valueOf()).then((function(a){console.log(a.data.length),e.props.changeProducts(a.data)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"fondoBusqueda  ",style:J},r.a.createElement("form",null,r.a.createElement("div",{className:"container contai-busqueda"},r.a.createElement("div",{className:"row  d-flex  justify-content-center"},r.a.createElement("label",{className:"busqueda"},"Los mejores productos...")),r.a.createElement("div",{className:"row d-flex justify-content-center"},r.a.createElement("input",{className:"formBusqueda  col-10 col-md-8 col-lg-6 offset-1 offset-md-2 offset-lg-3",type:"text",name:"search",value:this.state.search,onChange:this.handleChange,placeholder:"Busca por articulo"})))))}}]),t}(n.Component),Y=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).changeProducts=function(e){n.setState({productos:e})},n.state={productos:[]},n}return Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(W,{changeProducts:this.changeProducts}),r.a.createElement(M,{editable:!1,profile:!1,productos:this.state.productos}))}}]),t}(n.Component),V=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).refresh=function(){n.props.totalpedido(n.props.nombre,n.props.qte)},n.state={producto:""},n}return Object(s.a)(t,[{key:"render",value:function(){var e=this.props.prod.precio*this.props.prod.quantity,a="";return a=0===this.props.prod.quantity?"":r.a.createElement("div",{className:"row articulo"},r.a.createElement("div",{className:"col"},this.props.prod.quantity," x ",this.props.prod.nombre),r.a.createElement("div",{className:"col"},"Precio: ",this.props.prod.precio,"\u20ac"),r.a.createElement("div",{className:"col"},"Total: ",e,"\u20ac")),r.a.createElement("div",{className:""},a)}}]),t}(n.Component),K=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleChange=function(e){var a=e.target,t=a.name,r=a.value;n.setState(Object(b.a)({},t,r))},n.handleFormSubmit=function(e){e.preventDefault();for(var a=[],t=0;t<n.props.pedidos.length;++t){var r={nombre:n.props.pedidos[t].nombre,precio:n.props.pedidos[t].precio,cantidad:n.props.pedidos[t].quantity};a.push(r),console.log(a)}var o=n.state,c=o.nombre,l=o.telefono,s=o.email,i=o.recogida,m=n.props.precioFinal,u={idUsuario:n.props.pedidos[0].idUsuario,items:a,nombre:c,telefono:l,email:s,recogida:i,precioTotal:m};N.a.post("".concat("https://sugar-place.herokuapp.com","/api/pedido/"),u,{withCredentials:!0}).then((function(e){n.setState({nombre:"",telefono:"",email:""});var a="/pedido/"+e.data._id;window.location.href=a})).catch((function(e){console.log(e.response.data.message),n.setState({message:e.response.data.message})}))},n.state={nombre:"",telefono:"",email:"",recogida:"1 hora"},n}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a="";return this.state.message&&(a=r.a.createElement("small",{className:"form-text"},this.state.message)),r.a.createElement(F.a,Object.assign({},this.props,{"aria-labelledby":"contained-modal-title-vcenter"}),r.a.createElement(F.a.Header,{closeButton:!0},r.a.createElement(F.a.Title,null,"Finaliza tu pedido")),r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Nombre*"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"nombre",value:this.state.nombre,onChange:function(a){return e.handleChange(a)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Telefono*"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"telefono",value:this.state.telefono,onChange:function(a){return e.handleChange(a)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"email",value:this.state.email,onChange:function(a){return e.handleChange(a)}})),r.a.createElement("div",{class:"form-group"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",{class:"mr-sm-2"},"Recoger en tienda en*:  ")),r.a.createElement("div",{className:"col"},r.a.createElement("select",{class:"custom-select mr-sm-2",name:"recogida",value:this.state.recogida,onChange:function(a){return e.handleChange(a)}},r.a.createElement("option",{value:"1 hora"},"1 hora"),r.a.createElement("option",{value:"2 horas"},"2 horas"),r.a.createElement("option",{value:"3 horas"},"3 horas"),r.a.createElement("option",{value:"4 horas"},"4 horas"))))),r.a.createElement("small",{className:"form-text text-muted"},"*Campos obligatorios"),a,r.a.createElement(F.a.Footer,null,r.a.createElement("button",{className:"btn boton-form",type:"submit"},"Pedir")))))}}]),t}(n.Component),Q=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).openModal=function(){n.setState({modalOpen:!0})},n.closeModal=function(){n.setState({modalOpen:!1})},n.state={modalOpen:!1,items:[]},n}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a=[],t=0;for(var n in this.props.pedido)this.props.pedido.hasOwnProperty(n)&&(t+=this.props.pedido[n].precio*this.props.pedido[n].quantity,a.push({producto_id:n,quantity:this.props.pedido[n].quantity,precio:this.props.pedido[n].precio,nombre:this.props.pedido[n].nombre,idUsuario:this.props.pedido[n].idUsuario}));var o=a.map((function(e){return r.a.createElement(V,{key:e.producto_id,id:e.producto_id,prod:e})}));return console.log("pedidos",a),r.a.createElement("div",null,r.a.createElement("h1",{className:"tit-pedido"},"Pedido"),o,r.a.createElement("div",{className:"row total"},r.a.createElement("div",{className:"col"},r.a.createElement("p",{className:"precioTotal"},"TOTAL: ",t," \u20ac")),r.a.createElement("div",{className:"col"},r.a.createElement(w.a,{className:"btn-tramitar",variant:"primary",onClick:this.openModal},"Tramitar Pedido"))),r.a.createElement(K,{show:this.state.modalOpen,onHide:function(){return e.closeModal()},pedidos:a,precioFinal:t}))}}]),t}(n.Component),Z=t(69),$=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleChange=function(){var e=Object(I.a)(S.a.mark((function e(a){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({value:a});case 2:n.props.valorRating(a);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),n.state={value:0},n}return Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(Z.a,{className:"rating",value:this.state.value,name:"value",onChange:this.handleChange,activeColor:"#E32283",size:"25px",inactiveColor:"#E6E6E6"})}}]),t}(n.Component),X=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleChange=function(e){var a=e.target,t=a.name,r=a.value;n.setState(Object(b.a)({},t,r))},n.valorRating=function(e){n.setState({rating:e})},n.handleFormSubmit=function(e){e.preventDefault();var a=n.state,t=a.nombre,r=a.numeroPedido,o=a.comentario,c=a.rating,l={idUsuario:n.props.user._id,nombre:t,numeroPedido:r,comentario:o,rating:c};N.a.post("".concat("https://sugar-place.herokuapp.com","/api/review/"),l,{withCredentials:!0}).then((function(e){n.setState({nombre:"",numeroPedido:"",comentario:"",rating:""}),n.props.onHide(),n.props.actualizarReviews(e.data)})).catch((function(e){console.log(e.response.data.message),n.setState({message:e.response.data.message})}))},n.state={nombre:"",numeroPedido:"",comentario:"",rating:"",message:""},n.valorRating=n.valorRating.bind(Object(R.a)(n)),n}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a="";return this.state.message&&(a=r.a.createElement("small",{className:"form-text errores"},this.state.message)),r.a.createElement(F.a,Object.assign({},this.props,{"aria-labelledby":"contained-modal-title-vcenter"}),r.a.createElement(F.a.Header,{closeButton:!0},r.a.createElement(F.a.Title,null,"A\xf1adir rese\xf1a")),r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Nombre"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"nombre",value:this.state.nombre,onChange:function(a){return e.handleChange(a)}}))),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Numero de Pedido*"),r.a.createElement("input",{type:"number",className:"form-control",placeholder:"",name:"numeroPedido",value:this.state.numeroPedido,onChange:function(a){return e.handleChange(a)}})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Rating*"),r.a.createElement($,{valorRating:this.valorRating})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Comentario"),r.a.createElement("textarea",{className:"form-control",id:"exampleFormControlTextarea1",rows:"3",name:"comentario",value:this.state.comentario,onChange:function(a){return e.handleChange(a)}})),r.a.createElement("small",{className:"form-text text-muted"},"*Campos obligatorios"),r.a.createElement(F.a.Footer,null,r.a.createElement("button",{className:"btn boton-form",type:"submit"},"Guardar")),a)))}}]),t}(n.Component),ee=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).state={value:n.props.valor},n}return Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(Z.a,{className:"rating",value:this.state.value,activeColor:"#E32283",size:"25px",inactiveColor:"#E6E6E6"})}}]),t}(n.Component),ae=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(s.a)(t,[{key:"render",value:function(){var e=Date.parse(this.props.comentario.created_at),a=new Intl.DateTimeFormat("en",{year:"numeric"}).format(e),t=new Intl.DateTimeFormat("en",{month:"short"}).format(e),n=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(e);return r.a.createElement("div",null,r.a.createElement("div",{class:"row"},r.a.createElement("div",{className:"col col-md-4 col-lg-3"},r.a.createElement("p",{className:"nombre-coment"},this.props.comentario.nombre)),r.a.createElement("div",{className:"col"},r.a.createElement("p",null,"Pedido: ",this.props.comentario.numeroPedido))),r.a.createElement(ee,{valor:this.props.comentario.rating}),r.a.createElement("p",{className:"info-coment"},this.props.comentario.comentario),r.a.createElement("small",null,n," ",t," ",a),r.a.createElement("hr",null))}}]),t}(n.Component),te=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).state={comentarios:[]},n}return Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.reviews.map((function(e){return r.a.createElement(ae,{key:e._id,comentario:e})}));return console.log("usuario",this.props.userId),r.a.createElement("div",{className:"container "},r.a.createElement("h5",{className:"tit-comentarios"},"Rese\xf1as"),r.a.createElement("hr",null),e)}}]),t}(n.Component),ne=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).openModal=function(){n.setState({modalOpen:!0})},n.closeModal=function(){n.setState({modalOpen:!1})},n.modifyItem=function(e,a,t,r,o){var c=n.state.pedido;c[e]={quantity:a,precio:t,nombre:r,idUsuario:o},n.setState({pedido:c}),console.log(c)},n.state={user:null,pedido:{},modalOpen:!1,reviews:[]},n.openModal=n.openModal.bind(),n.closeModal=n.closeModal.bind(),n.actualizarReviews=n.actualizarReviews.bind(Object(R.a)(n)),n}return Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;N.a.get("".concat("https://sugar-place.herokuapp.com","/api/usuario/")+this.props.match.params.id,{withCredentials:!0}).then((function(a){e.setState({user:a.data})})),this.actualizarReviews(),g()("button").click((function(){g()("html,body").animate({scrollTop:g()(".second").offset().top},"slow")}))}},{key:"actualizarReviews",value:function(){var e=this;N.a.get("".concat("https://sugar-place.herokuapp.com","/api/review/")+this.props.match.params.id+"?time="+(new Date).valueOf(),{withCredentials:!0}).then((function(a){e.setState({reviews:a.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,a="";return a=0===Object.keys(this.state.pedido).length?"":r.a.createElement("div",{className:"pedido"},r.a.createElement("div",{className:"container"},r.a.createElement(Q,{pedido:this.state.pedido,ordenFinalizada:this.ordenFinalizada}))),r.a.createElement("div",null,r.a.createElement("div",{className:"container tienda mb-60"},r.a.createElement("h1",{className:"mt-30 perfil"}),r.a.createElement(z,{user:this.state.user}),r.a.createElement("div",{className:"first"},r.a.createElement("button",{type:"button",className:"ver-rese\xf1as out"},"Ver rese\xf1as")),r.a.createElement(M,{userId:this.props.match.params.id,modifyItem:this.modifyItem}),r.a.createElement(w.a,{className:"boton-editar rese\xf1a",variant:"primary",onClick:this.openModal},"A\xf1adir rese\xf1a"),r.a.createElement(X,{user:this.state.user,show:this.state.modalOpen,onHide:function(){return e.closeModal()},actualizarReviews:this.actualizarReviews}),r.a.createElement("div",{class:"second"},r.a.createElement(te,{id:"hojareviews",userId:this.props.match.params.id,reviews:this.state.reviews,actualizarReviews:this.actualizarReviews}))),a)}}]),t}(n.Component),re=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).state={pedido:{}},n}return Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;N.a.get("".concat("https://sugar-place.herokuapp.com","/api/pedido/")+this.props.match.params.id,{withCredentials:!0}).then((function(a){e.setState({pedido:a.data[0]}),console.log(a.data)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container fin-pedido"},"Gracias ",this.state.pedido.nombre," por realizar tu pedido.",r.a.createElement("br",null),"Tu pedido es el numero ",r.a.createElement("b",null,this.state.pedido.numeroPedido),".",r.a.createElement("br",null),"Lo podras recoger en ",this.state.pedido.recogida,".",r.a.createElement("br",null),r.a.createElement("div",{className:"div-volver"},r.a.createElement(h.b,{className:"volver",to:"/"},"Volver")))}}]),t}(n.Component),oe=t(297),ce=t(298),le=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("p",null,this.props.infoPedido.nombre)),r.a.createElement("div",{className:"col"},r.a.createElement("p",null,"Precio: ",this.props.infoPedido.precio)),r.a.createElement("div",{className:"col"},r.a.createElement("p",null,"Cantidad: ",this.props.infoPedido.cantidad))))}}]),t}(n.Component);var se=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleChange=function(){var e=Object(I.a)(S.a.mark((function e(a){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({status:a.target.value});case 2:n.handleFormSubmit(a);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),n.handleFormSubmit=function(){var e=Object(I.a)(S.a.mark((function e(a){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.state.status,N.a.patch("".concat("https://sugar-place.herokuapp.com","/api/pedido/").concat(n.props.pedido._id),{status:t},{withCredentials:!0}).then((function(e){console.log(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),n.state={status:n.props.pedido.status},n}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a=[{name:"Nuevo",value:"Nuevo"},{name:"Preparacion",value:"EnPreparacion"},{name:"Finalizado",value:"Finalizado"},{name:"Entregado",value:"Entregado"},{name:"Cancelado",value:"Cancelado"}].map((function(a,t){return r.a.createElement(oe.a,{key:t,className:"toggle nuevo ",type:"radio",variant:"secondary",name:"status",value:a.value,checked:e.state.status===a.value,onChange:function(a){return e.handleChange(a)}},a.name)})),t=this.props.pedido.items.map((function(e){return r.a.createElement(le,{key:e._id,infoPedido:e})})),n=Date.parse(this.props.pedido.created_at),o=function(e){var a=(e/1e3).toFixed(0),t=(e/6e4).toFixed(0),n=(e/36e5).toFixed(0),r=(e/864e5).toFixed(0);return a<60?a+" Segundos":t<60?t+" Min":n<24?n+" Horas, "+t%60+" minutos":r+" D\xedas, "+n%24+" horas"}(new Date-n);return r.a.createElement("div",{className:"pedido-baker"},r.a.createElement("div",{className:"container  mb-50 mt-30"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("p",{className:"numero-pedido"},"Pedido Numero ",this.props.pedido.numeroPedido," ")),r.a.createElement("div",{className:"col"},r.a.createElement("p",{className:"fecha"},"Hace ",o," "))),r.a.createElement("div",{className:" row"},r.a.createElement("div",{className:"col"},r.a.createElement("p",{className:"datos"},"Nombre: ",this.props.pedido.nombre," ")),r.a.createElement("div",{className:"col"},r.a.createElement("p",{className:"datos"},"Telefono: ",this.props.pedido.telefono))),r.a.createElement("p",{className:"fecha"},"Entregar en:  ",this.props.pedido.recogida," "),r.a.createElement("p",{className:"detalles"},"Detalles del pedido:"),t,r.a.createElement("p",{className:"precio-total"},"Total:",this.props.pedido.precioTotal,"\u20ac"),r.a.createElement("p",null," Estado:",this.state.status),r.a.createElement(ce.a,{vertical:!0,toggle:!0},a)))}}]),t}(n.Component),ie=t(299),me=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleChange=function(){var e=Object(I.a)(S.a.mark((function e(a){var t,r,o,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.target,o=r.name,c=r.value,e.next=3,n.setState((t={},Object(b.a)(t,o,c),Object(b.a)(t,"filtro",!0),Object(b.a)(t,"first",!0),t));case 3:n.actualizarPedidos();case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),n.state={first:!0,pedidos:[],filtroEstado:null,filtro:!1,notification:!1},n}return Object(s.a)(t,[{key:"componentWillUnmount",value:function(){this.timer=null}},{key:"closeNotification",value:function(){this.setState({notification:!1})}},{key:"actualizarPedidos",value:function(){var e=this;this.state.filtro&&"all"!=this.state.filtroEstado?N.a.get("".concat("https://sugar-place.herokuapp.com","/api/pedido/all/?status=")+this.state.filtroEstado+"&time="+(new Date).valueOf(),{withCredentials:!0}).then((function(a){e.setState({pedidos:a.data,first:!1})})).catch((function(e){console.log(e)})):N.a.get("".concat("https://sugar-place.herokuapp.com","/api/pedido/all/")+"?time="+(new Date).valueOf(),{withCredentials:!0}).then((function(a){var t=e.state.pedidos.length,n=a.data.length;(e.state.first||t>0&&t<n)&&(e.state.first||e.setState({notification:!0}),e.setState({pedidos:a.data,first:!1}))})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval((function(){return e.actualizarPedidos()}),1e4),this.actualizarPedidos()}},{key:"render",value:function(){var e=this,a=this.state.pedidos.sort((function(e,a){return a.numeroPedido-e.numeroPedido})).map((function(e){return r.a.createElement(se,{key:e._id,pedido:e})})),t="";return this.state.notification&&(t=r.a.createElement(ie.a,{variant:"success",onClose:function(){return e.closeNotification()},dismissible:!0},"Pedido nuevo")),r.a.createElement("div",{className:""},r.a.createElement("div",{className:"container"},t,r.a.createElement("form",null,r.a.createElement("div",{class:"form-group "},r.a.createElement("div",{className:"row mt-30"},r.a.createElement("div",{className:"col"},r.a.createElement("label",{class:"mr-sm-2"},"Filtrar por estado:")),r.a.createElement("div",{className:"col-5 col-md-4 col-lg-4"},r.a.createElement("select",{class:"custom-select sel-status",name:"filtroEstado",value:this.state.filtroEstado,onChange:function(a){return e.handleChange(a)}},r.a.createElement("option",{value:"all",selected:!0},"Todos"),r.a.createElement("option",{value:"Nuevo"},"Nuevo"),r.a.createElement("option",{value:"EnPreparacion"},"En preparacion"),r.a.createElement("option",{value:"Finalizado"},"Finalizado"),r.a.createElement("option",{value:"Entregado"},"Entregado"),r.a.createElement("option",{value:"Cancelado"},"Cancelado"))))))),a)}}]),t}(n.Component),ue=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(s.a)(t,[{key:"render",value:function(){var e=Date.parse(this.props.comentario.created_at),a=new Intl.DateTimeFormat("en",{year:"numeric"}).format(e),t=new Intl.DateTimeFormat("en",{month:"short"}).format(e),n=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(e);return r.a.createElement("div",{className:"review-baker pb-40 pt-40 "},r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"fecha-re"},n," ",t," ",a),r.a.createElement("div",{class:"row"},r.a.createElement("div",{className:"col col-md-4 col-lg-3"},r.a.createElement("p",{className:"nombre-coment"},"Pedido: ",this.props.comentario.numeroPedido)),r.a.createElement("div",{className:"col"},r.a.createElement("p",null,this.props.comentario.nombre))),r.a.createElement(ee,{valor:this.props.comentario.rating}),r.a.createElement("p",{className:"info-coment"},this.props.comentario.comentario)))}}]),t}(n.Component),de=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).state={comentarios:[]},n}return Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;N.a.get("".concat("https://sugar-place.herokuapp.com","/api/review/")+this.props.user._id+"?time="+(new Date).valueOf(),{withCredentials:!0}).then((function(a){e.setState({comentarios:a.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.comentarios.map((function(e){return r.a.createElement(ue,{key:e._id,comentario:e})}));return r.a.createElement("div",{className:"mt-50"},e)}}]),t}(n.Component),pe=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;Object(l.a)(this,t),(n=a.call(this,e)).getTheUser=function(e){n.setState({loggedInUser:e}),localStorage.setItem("user",JSON.stringify(e))};var r=JSON.parse(localStorage.getItem("user"));return n.state={loggedInUser:r},n}return Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(v,{user:this.state.loggedInUser,key:this.state.loggedInUser}),r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/"},r.a.createElement(Y,null)),r.a.createElement(u.b,{exact:!0,path:"/signup",render:function(a){return r.a.createElement(k,Object.assign({},a,{getUser:e.getTheUser}))}}),r.a.createElement(u.b,{exact:!0,path:"/login",render:function(a){return r.a.createElement(O,Object.assign({},a,{getUser:e.getTheUser}))}}),r.a.createElement(u.b,{exact:!0,path:"/logout",render:function(a){return r.a.createElement(y,Object.assign({},a,{getUser:e.getTheUser}))}}),r.a.createElement(u.b,{path:"/formbaker",render:function(a){return r.a.createElement(G,Object.assign({},a,{getUser:e.getTheUser,user:e.state.loggedInUser}))}}),r.a.createElement(u.b,{exact:!0,path:"/profile",render:function(a){return r.a.createElement(q,Object.assign({},a,{getUser:e.getTheUser,user:e.state.loggedInUser}))}}),r.a.createElement(u.b,{exact:!0,path:"/pedidos",component:me}),r.a.createElement(u.b,{exact:!0,path:"/reviews",render:function(a){return r.a.createElement(de,{user:e.state.loggedInUser})}}),r.a.createElement(u.b,{exact:!0,path:"/baker/:id",component:ne}),r.a.createElement(u.b,{exact:!0,path:"/pedido/:id",component:re})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(h.a,null,r.a.createElement(pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[146,1,2]]]);
//# sourceMappingURL=main.4fa913c7.chunk.js.map